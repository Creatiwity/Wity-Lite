<div class="row-fluid">
	<button id="add_group_button" class="btn btn-success pull-right" onclick="showAddForm();
			return false;"><i class="icon-plus icon-white"></i> {lang add_a_group}</button>
</div>
<div class="row-fluid">
	<form method="post">
		<table class="table table-hover table-striped">
			<thead>
				<tr>
					<th><a href="/admin/user/groups/name-{$name_sort}/"><i class="{$name_class}"></i> {lang group_name}</a></th>
					<th><a href="/admin/user/groups/users_count-{$users_count_sort}/"><i class="{$users_count_class}"></i> {lang group_users_count}</a></th>
					<th>{lang actions}</th>
				</tr>
			</thead>
			<tbody id="categories_body">
				{for $count, $group in $groups}
				<tr data-wity-category='{"id":"{$group.id}", "name":"{$group.name}", "access":"{$group.access}"'>
					<td><strong>{$group.name}</strong></td>
					<td>{$group.users_count}</td>
					<td>
						<span title="{lang edit}" class="link wity_edit_group"><i class="icon-edit"></i></span>
						<span title="{lang delete}" class="link" data-link-modal="/admin/user/group_del/{$group.id}/" data-modal-container="modal_delete"><i class="icon-trash"></i></span>
					</td>
				</tr>
				{/for}
				{empty}
				<tr>
					<td colspan="3"><p class="text-center">{lang no_group_found}</p></td>
				</tr>
				{/empty}
			</tbody>
		</table>
		<input type="text" id="news_cat_id" name="news_cat_id" class="hidden"/>
	</form>
</div>

<div id="modal_delete" class="modal hide fade"></div>
<div id="groupEditor" class="hide">
	<input type="hidden" name="id" />
	<input class="group-name" type="text" name="name" placeholder="{lang group_name}" />
	<h2>{lang group_default_access_for_users}</h2>
	<label><input class="access-type none" type="radio" name="type" value="none" checked="checked" /> {lang access_none}</label>
	<label><input class="access-type all" type="radio" name="type" value="all" /> {lang access_all}</label>
	<label><input class="access-type custom" type="radio" name="type" value="custom" /> {lang access_custom}</label>

	<div class="custom-controls tright">
		<a href="javascript:void(0)" class="check-all">{lang check_all}</a> - <a href="javascript:void(0)" class="uncheck-all">{lang uncheck_all}</a>
	</div>
	<table class="rights" cellpadding="0" cellspacing="0">
		<colgroup><col width="25%" /></colgroup>
		{for $app, $details in $admin_apps}
		<tr>
			<td class="tcenter"><strong>{$details.name}</strong></td>
			<td>
				<table class="permissions" cellpadding="0" cellspacing="0">
					<tr class="tcenter">
						{for $perm in {$details.permissions}}
						<td><label>{$perm|ucfirst}<br /><input type="checkbox" name="access[{$app}][{$perm}]" /></label></td>
						{/for}
						{empty}
						<td><em>{lang no_permissions}</em></td>
						{/empty}
					</tr>
				</table>
			</td>
		</tr>
		{/for}
	</table>
	<div class="custom-controls tright">
		<a href="javascript:void(0)" class="check-all">{lang check_all}</a> - <a href="javascript:void(0)" class="uncheck-all">{lang uncheck_all}</a>
	</div>
	<div class="tcenter">
		<input type="submit" value="{lang apply}" />
		<input type="button" value="{lang cancel}" onclick="resetGroupForms();" />
	</div>
</div>