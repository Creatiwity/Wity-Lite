<div class="row-fluid">
	<a id="add_group_button" href="#groupEditor" role="button" data-toggle="modal" class="btn btn-success pull-right">
		<i class="icon-plus icon-white"></i> {lang add_a_group}</a>
</div>
<div class="row-fluid">
	<form method="post">
		<table class="table table-hover table-striped">
			<thead>
				<tr>
					<th><a href="/admin/user/groups/name-{$name_sort}/"><i class="{$name_class}"></i> {lang group_name}</a></th>
					<th><a href="/admin/user/groups/users_count-{$users_count_sort}/"><i class="{$users_count_class}"></i> {lang group_users_count}</a></th>
					<th>{lang actions}</th>
				</tr>
			</thead>
			<tbody id="categories_body">
				{for $count, $group in $groups}
				<tr data-wity-category='{"id":"{$group.id}", "name":"{$group.name}", "access":"{$group.access}"'>
					<td><strong>{$group.name}</strong></td>
					<td>{$group.users_count}</td>
					<td>
						<a title="{lang edit}" href="#groupEditor" role="button" data-toggle="modal" class="link wity_edit_group"><i class="icon-edit"></i></a>
						<span title="{lang delete}" class="link" data-link-modal="/admin/user/group_del/{$group.id}/" data-modal-container="modal_delete"><i class="icon-trash"></i></span>
					</td>
				</tr>
				{/for}
				{empty}
				<tr>
					<td colspan="3"><p class="text-center">{lang no_group_found}</p></td>
				</tr>
				{/empty}
			</tbody>
		</table>
		<input type="text" id="news_cat_id" name="news_cat_id" class="hidden"/>
	</form>
</div>

<div id="modal_delete" class="modal hide fade"></div>
<div id="groupEditor" class="modal hide fade">
	<form id="user-access" action="" method="post">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h3>Group Edition</h3>
		</div>
	  	<div id="content" class="modal-body">
			<input type="hidden" name="id" />
			<input class="group-name input-block-level" type="text" name="name" placeholder="{lang group_name}" />
			<hr/>
			<h4>{lang group_default_access_for_users}</h4>
			<label><input class="access-type none" type="radio" name="type" value="none" checked="checked" /> {lang access_none}</label>
			<label><input class="access-type all" type="radio" name="type" value="all" /> {lang access_all}</label>
			<label><input class="access-type custom" type="radio" name="type" value="custom" /> {lang access_custom}</label>

			<div class="custom-controls tright">
				<a href="javascript:void(0)" class="check-all">{lang check_all}</a> - <a href="javascript:void(0)" class="uncheck-all">{lang uncheck_all}</a>
			</div>
			<table class="rights" cellpadding="0" cellspacing="0">
				<colgroup><col width="25%" /></colgroup>
				{for $app, $details in $admin_apps}
				<tr>
					<td><p class="text-center"><strong>{$details.name}</strong></p></td>
					<td>
						<table class="permissions" cellpadding="0" cellspacing="0">
							<tr>
							{for $perm in {$details.permissions}}
								<td><p class="text-center"><label>{$perm|ucfirst}<br /><input type="checkbox" name="access[{$app}][{$perm}]" /></label></p></td>
							{/for}
							{empty}
								<td><p class="text-center"><em>{lang no_permissions}</em></p></td>
							{/empty}
							</tr>
						</table>
					</td>
				</tr>
				{/for}
			</table>
			<div class="custom-controls tright">
				<a href="javascript:void(0)" class="check-all">{lang check_all}</a> - <a href="javascript:void(0)" class="uncheck-all">{lang uncheck_all}</a>
			</div>
		</div>
		<div class="modal-footer">
			<input type="submit" class="btn btn-primary" value="{lang apply}" />
			<input type="button" class="btn" value="{lang cancel}" data-dismiss="modal" aria-hidden="true" />
		</div>
	</form>
</div>